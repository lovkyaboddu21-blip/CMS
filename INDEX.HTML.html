<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BunnyPress Pro | Next-Gen CMS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #6366f1; --secondary: #a855f7; --accent: #f43f5e; --bg-dark: #0f172a; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; color: #1e293b; overflow-x: hidden; }
        .glass-card { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07); }
        .sidebar-gradient { background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%); }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px -10px var(--primary); }
        .nav-item { transition: all 0.2s; border-radius: 12px; margin-bottom: 4px; }
        .nav-item.active { background: rgba(99, 102, 241, 0.1); color: var(--primary); font-weight: 700; }
        .editor-canvas { min-height: 350px; outline: none; transition: all 0.2s; }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50">

    <div id="authOverlay" class="fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-xl">
        <div class="glass-card w-full max-w-md p-10 rounded-[2.5rem] border border-white/40">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-3xl btn-primary text-white mb-4 shadow-2xl">
                    <i data-lucide="Zap" class="w-10 h-10"></i>
                </div>
                <h2 id="authTitle" class="text-3xl font-extrabold tracking-tight">Sign In</h2>
                <p id="authSubtitle" class="text-slate-500 font-medium">BunnyPress Enterprise CMS</p>
            </div>
            
            <div class="space-y-4">
                <input type="text" id="loginUser" class="w-full p-4 rounded-2xl bg-slate-100 border-none focus:ring-2 focus:ring-indigo-500 outline-none transition-all" placeholder="Username">
                <input type="password" id="loginPass" class="w-full p-4 rounded-2xl bg-slate-100 border-none focus:ring-2 focus:ring-indigo-500 outline-none transition-all" placeholder="Password">
                
                <button id="authMainBtn" onclick="processAuth()" class="w-full btn-primary text-white p-4 rounded-2xl font-bold text-lg mt-4">Initialize System</button>
                <p class="text-center text-sm text-slate-500 pt-2">
                    <span id="authToggleText">Need access?</span> 
                    <button onclick="toggleAuth()" id="authToggleBtn" class="text-indigo-600 font-bold hover:underline">Register Now</button>
                </p>
            </div>
        </div>
    </div>

    <div id="appContainer" class="flex min-h-screen hidden">
        <aside class="w-72 sidebar-gradient text-slate-400 p-6 flex flex-col fixed h-full z-50">
            <div class="flex items-center gap-3 px-2 mb-10 text-white">
                <div class="w-10 h-10 btn-primary rounded-xl flex items-center justify-center font-bold">B</div>
                <span class="text-xl font-black tracking-tighter italic">BUNNYPRESS</span>
            </div>

            <nav class="flex-1">
                <p class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 mb-4 px-2">Main Menu</p>
                <div onclick="switchTab('dashboard')" class="nav-item active flex items-center gap-3 p-4 cursor-pointer hover:text-white">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
                </div>
                <div onclick="switchTab('editor')" class="nav-item flex items-center gap-3 p-4 cursor-pointer hover:text-white">
                    <i data-lucide="pen-tool" class="w-5 h-5"></i> Post Editor
                </div>
                <div onclick="switchTab('posts')" class="nav-item flex items-center gap-3 p-4 cursor-pointer hover:text-white">
                    <i data-lucide="file-text" class="w-5 h-5"></i> Content Lab
                </div>
                <div onclick="switchTab('media')" class="nav-item flex items-center gap-3 p-4 cursor-pointer hover:text-white">
                    <i data-lucide="image" class="w-5 h-5"></i> Media Assets
                </div>
                <div id="adminLink" class="hidden">
                    <p class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 mb-4 mt-8 px-2">System Admin</p>
                    <div onclick="switchTab('users')" class="nav-item flex items-center gap-3 p-4 cursor-pointer hover:text-white">
                        <i data-lucide="shield-check" class="w-5 h-5"></i> Access Control
                    </div>
                </div>
            </nav>

            <div class="mt-auto border-t border-white/10 pt-6">
                <div class="flex items-center gap-3 p-2 bg-white/5 rounded-2xl mb-4">
                    <div class="w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold" id="userInitial">B</div>
                    <div class="overflow-hidden">
                        <p class="text-sm font-bold text-white truncate" id="sideUserName">Bunny</p>
                        <p class="text-[10px] uppercase font-black text-indigo-400" id="sideUserRole">Administrator</p>
                    </div>
                </div>
                <button onclick="location.reload()" class="w-full p-4 rounded-xl hover:bg-red-500/10 text-red-400 flex items-center gap-3 font-bold transition-all">
                    <i data-lucide="log-out" class="w-5 h-5"></i> Logout
                </button>
            </div>
        </aside>

        <main class="flex-1 ml-72 p-10">
            <header class="flex justify-between items-center mb-10">
                <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight" id="headerTitle">Control Center</h1>
                <div class="glass-card flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold text-slate-600">
                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Aurora Network Active
                </div>
            </header>

            <section id="tab-dashboard" class="animate-in space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="glass-card p-8 rounded-3xl">
                        <h4 class="text-slate-400 text-xs font-black uppercase tracking-widest">Total Posts</h4>
                        <p class="text-4xl font-black mt-2" id="stat-posts">0</p>
                    </div>
                    <div class="glass-card p-8 rounded-3xl">
                        <h4 class="text-slate-400 text-xs font-black uppercase tracking-widest">Team Members</h4>
                        <p class="text-4xl font-black mt-2" id="stat-users">0</p>
                    </div>
                    <div class="glass-card p-8 rounded-3xl bg-indigo-50 border-indigo-100">
                        <h4 class="text-indigo-400 text-xs font-black uppercase tracking-widest">System Health</h4>
                        <p class="text-xl font-bold mt-2 text-indigo-600">Optimum Performance</p>
                    </div>
                </div>
                <div class="glass-card p-8 rounded-[2.5rem]">
                    <h3 class="text-xl font-extrabold mb-6">Article Velocity Analytics</h3>
                    <canvas id="trafficChart" height="100"></canvas>
                </div>
            </section>

            <section id="tab-editor" class="hidden animate-in">
                <div class="glass-card p-10 rounded-[2.5rem] max-w-4xl mx-auto">
                    <input type="text" id="editorTitle" class="w-full text-4xl font-black outline-none mb-6 bg-transparent placeholder:text-slate-200" placeholder="Post Headline...">
                    <div class="flex gap-2 mb-4 p-2 bg-slate-50 rounded-xl">
                        <button onclick="format('bold')" class="px-4 py-2 hover:bg-white rounded-lg font-bold">B</button>
                        <button onclick="format('italic')" class="px-4 py-2 hover:bg-white rounded-lg italic">I</button>
                        <button onclick="format('insertUnorderedList')" class="px-4 py-2 hover:bg-white rounded-lg">List</button>
                    </div>
                    <div id="editorCanvas" contenteditable="true" class="editor-canvas text-lg text-slate-600 leading-relaxed p-4" placeholder="Share your story..."></div>
                    <button onclick="publishArticle()" class="btn-primary w-full mt-6 text-white p-4 rounded-2xl font-bold shadow-lg">Publish to Campus Feed</button>
                </div>
            </section>

            <section id="tab-posts" class="hidden animate-in">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-2xl font-black">Content Repository</h3>
                    <input type="text" id="postSearch" onkeyup="renderPosts()" placeholder="Search articles..." class="px-6 py-2 rounded-full glass-card outline-none text-sm w-64">
                </div>
                <div id="postsList" class="grid gap-4"></div>
            </section>

            <section id="tab-media" class="hidden animate-in">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-2xl font-black">Media Assets</h3>
                    <label class="btn-primary text-white px-8 py-3 rounded-xl font-bold cursor-pointer">
                        Upload Image <input type="file" class="hidden" id="mediaUpload" onchange="handleMedia(this)">
                    </label>
                </div>
                <div id="mediaGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>
            </section>

            <section id="tab-users" class="hidden animate-in">
                <div class="glass-card rounded-[2.5rem] overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b">
                            <tr>
                                <th class="px-8 py-5 text-xs font-black uppercase text-slate-400">User</th>
                                <th class="px-8 py-5 text-xs font-black uppercase text-slate-400">Role</th>
                                <th class="px-8 py-5 text-xs font-black uppercase text-slate-400">Status</th>
                            </tr>
                        </thead>
                        <tbody id="userList"></tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <div id="toast" class="fixed bottom-10 right-10 z-[200] transform translate-y-20 opacity-0 transition-all duration-500">
        <div class="glass-card bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold shadow-2xl flex items-center gap-3">
            <i data-lucide="check-circle" class="w-5 h-5"></i> <span id="toastMsg">System Updated</span>
        </div>
    </div>

    <script>
        let isRegMode = false;
        let state = {
            users: JSON.parse(localStorage.getItem('bp_users')) || [{ user: 'Bunny', pass: '251U1R2063', role: 'Admin', status: 'Active' }],
            posts: JSON.parse(localStorage.getItem('bp_posts')) || [],
            media: JSON.parse(localStorage.getItem('bp_media')) || [],
            currentUser: null
        };

        // --- AUTH ---
        function toggleAuth() {
            isRegMode = !isRegMode;
            document.getElementById('authTitle').innerText = isRegMode ? "Create Account" : "Sign In";
            document.getElementById('authMainBtn').innerText = isRegMode ? "Register Now" : "Initialize System";
            document.getElementById('authToggleBtn').innerText = isRegMode ? "Login" : "Register Now";
        }

        function processAuth() {
            const u = document.getElementById('loginUser').value.trim();
            const p = document.getElementById('loginPass').value.trim();
            if(!u || !p) return alert("Fill all fields");

            if(isRegMode) {
                if(state.users.find(x => x.user === u)) return alert("User exists!");
                // INSTANT LOGIN ENABLED: Status is set to Active immediately
                state.users.push({ user: u, pass: p, role: 'Editor', status: 'Active' });
                save();
                alert("Account Created! You can log in now.");
                toggleAuth();
            } else {
                const account = state.users.find(x => x.user === u && x.pass === p);
                if(!account) return alert("Invalid Credentials");
                state.currentUser = account;
                document.getElementById('authOverlay').classList.add('hidden');
                document.getElementById('appContainer').classList.remove('hidden');
                initApp();
            }
        }

        function initApp() {
            lucide.createIcons();
            document.getElementById('sideUserName').innerText = state.currentUser.user;
            document.getElementById('sideUserRole').innerText = state.currentUser.role;
            document.getElementById('userInitial').innerText = state.currentUser.user.charAt(0);
            if(state.currentUser.role === 'Admin') document.getElementById('adminLink').classList.remove('hidden');
            renderAll();
            initChart();
        }

        // --- CORE ---
        function switchTab(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(`tab-${id}`).classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.getElementById('headerTitle').innerText = id.charAt(0).toUpperCase() + id.slice(1);
        }

        function format(cmd) { document.execCommand(cmd, false, null); }

        function publishArticle() {
            const title = document.getElementById('editorTitle').value;
            const content = document.getElementById('editorCanvas').innerHTML;
            if(!title || !content) return;

            state.posts.unshift({ title, content, author: state.currentUser.user, date: new Date().toLocaleDateString(), id: Date.now() });
            save();
            document.getElementById('editorTitle').value = "";
            document.getElementById('editorCanvas').innerHTML = "";
            showToast("Article Published Live!");
            renderAll();
            switchTab('posts');
        }

        function handleMedia(input) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = (e) => {
                state.media.unshift({ src: e.target.result, id: Date.now() });
                save(); renderAll();
                showToast("Image Uploaded");
            };
            reader.readAsDataURL(file);
        }

        function save() {
            localStorage.setItem('bp_users', JSON.stringify(state.users));
            localStorage.setItem('bp_posts', JSON.stringify(state.posts));
            localStorage.setItem('bp_media', JSON.stringify(state.media));
        }

        function renderAll() {
            document.getElementById('stat-posts').innerText = state.posts.length;
            document.getElementById('stat-users').innerText = state.users.length;

            renderPosts();

            document.getElementById('mediaGrid').innerHTML = state.media.map(m => `
                <div class="glass-card aspect-square rounded-2xl overflow-hidden p-1">
                    <img src="${m.src}" class="w-full h-full object-cover rounded-xl">
                </div>
            `).join('');

            document.getElementById('userList').innerHTML = state.users.map(u => `
                <tr class="border-b border-slate-50">
                    <td class="px-8 py-5 font-bold">${u.user}</td>
                    <td class="px-8 py-5 text-xs font-black uppercase text-slate-400">${u.role}</td>
                    <td class="px-8 py-5"><span class="bg-green-100 text-green-600 px-3 py-1 rounded-full text-[10px] font-black uppercase">Active</span></td>
                </tr>
            `).join('');
            lucide.createIcons();
        }

        function renderPosts() {
            const query = document.getElementById('postSearch').value.toLowerCase();
            const filtered = state.posts.filter(p => p.title.toLowerCase().includes(query));
            
            document.getElementById('postsList').innerHTML = filtered.map(p => `
                <div class="glass-card p-6 rounded-2xl flex justify-between items-center group">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-indigo-50 text-indigo-600 flex items-center justify-center"><i data-lucide="file-text"></i></div>
                        <div><h4 class="font-bold">${p.title}</h4><p class="text-xs font-bold text-slate-400 uppercase tracking-widest">${p.author} â€¢ ${p.date}</p></div>
                    </div>
                    <button onclick="deletePost(${p.id})" class="text-red-400 opacity-0 group-hover:opacity-100 transition-all"><i data-lucide="trash-2"></i></button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function deletePost(id) { state.posts = state.posts.filter(p => p.id !== id); save(); renderAll(); }

        function showToast(m) {
            document.getElementById('toastMsg').innerText = m;
            const t = document.getElementById('toast');
            t.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => t.classList.add('translate-y-20', 'opacity-0'), 3000);
        }

        function initChart() {
            const ctx = document.getElementById('trafficChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5'],
                    datasets: [{
                        data: [10, 40, 25, 70, 90],
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: { plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { display: false } } } }
            });
        }
    </script>
</body>
</html> 